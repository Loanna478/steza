(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[485],{6276:function(e,t,r){Promise.resolve().then(r.bind(r,7813))},7813:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return o}});var n=r(7437),a=r(2265),s=r(6463),c=r(7138),l=r(1422);function i(){(0,s.useRouter)();let[e,t]=(0,a.useState)(null),r=(0,s.useSearchParams)();(0,a.useEffect)(()=>{t(r.get("id"))},[r]);let[i,o]=(0,a.useState)(null),[u,d]=(0,a.useState)("Episode 1 FR"),[h,f]=(0,a.useState)(""),[x,p]=(0,a.useState)(!1),[m,g]=(0,a.useState)(!1),[w,y]=(0,a.useState)(!1),v=(0,a.useCallback)(async e=>{try{let t=await fetch("http://85.215.137.122:8081/getseriebyid?id=".concat(e),{method:"GET",headers:{"Content-Type":"application/json"}});if(t.ok){let e=await t.json();o(e.serie),j("Episode 1","FR",e.serie)}else console.error("Erreur lors de la r\xe9cup\xe9ration de la s\xe9rie:",t.statusText)}catch(e){e instanceof Error?console.error("Erreur: ".concat(e.message)):console.error("Une erreur inconnue est survenue")}},[]),j=(0,a.useCallback)(async(e,t,r)=>{p(!0);try{let n=await fetch("http://85.215.137.122:8081/getepisodelink?episodeid=".concat(e,"&seriename=").concat(r.name,"&language=").concat(t),{method:"GET",headers:{"Content-Type":"application/json"}});if(n.ok){let e=await n.json();f(e.link)}else console.error("Erreur lors de la r\xe9cup\xe9ration du lien de l'\xe9pisode:",n.statusText),f("")}catch(e){e instanceof Error?console.error("Erreur: ".concat(e.message)):console.error("Une erreur inconnue est survenue"),f("")}finally{p(!1)}},[]);return((0,a.useEffect)(()=>{e&&v(e)},[e,v]),(0,a.useEffect)(()=>{if(u&&i){let e=u.split(" ");j(e.slice(0,-1).join(" "),e[e.length-1],i)}},[u,i,j]),(0,a.useEffect)(()=>{if(i&&u){let e=i.episodes.findIndex(e=>"".concat(e.episode," ").concat(e.language)===u);g(e>0),y(e<i.episodes.length-1)}},[u,i]),i)?(0,n.jsxs)("div",{className:"flex flex-col min-h-screen bg-slate-900 text-white",children:[(0,n.jsxs)("nav",{className:"fixed top-3 left-1/2 transform -translate-x-1/2 bg-black/50 backdrop-blur-md text-white z-50 py-4 px-6 md:px-12 flex justify-between items-center rounded-xl w-full md:w-3/4 max-w-5xl",children:[(0,n.jsx)(c.default,{href:"/",className:"text-xl font-bold",children:"MSTREAM"}),(0,n.jsxs)("div",{className:"hidden md:flex space-x-6 items-center",children:[(0,n.jsx)(c.default,{href:"/pages/series",className:"hover:text-blue-400",children:"Serie"}),(0,n.jsx)(c.default,{href:"/pages/films",className:"hover:text-blue-400",children:"Films"})]})]}),(0,n.jsx)(l.Z,{className:"absolute inset-0 pointer-events-none",quantity:100}),(0,n.jsx)("main",{className:"flex-grow pt-24",children:(0,n.jsxs)("div",{className:"text-center mx-auto max-w-4xl p-4",children:[(0,n.jsx)("h1",{className:"text-3xl md:text-4xl font-bold mb-4",children:i.name}),(0,n.jsx)("p",{className:"text-lg mb-6",children:i.description})]})}),(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)("select",{className:"bg-slate-800 text-white px-3 py-2 rounded mb-4",value:u,onChange:e=>{d(e.target.value)},children:i.episodes.map(e=>(0,n.jsxs)("option",{value:"".concat(e.episode," ").concat(e.language),children:[e.episode," ",e.language]},"".concat(e.episode," ").concat(e.language)))}),(0,n.jsx)("center",{children:x?(0,n.jsx)("p",{children:"Chargement du lien vid\xe9o..."}):h?(0,n.jsx)("iframe",{title:u,width:"900",height:"430",src:h,frameBorder:"0",allowFullScreen:!0,className:"my-4"}):(0,n.jsx)("p",{children:"Le lien vid\xe9o n est pas disponible pour cet \xe9pisode."})}),(0,n.jsxs)("div",{className:"flex justify-center items-center mb-4 space-x-2",children:[m&&(0,n.jsx)("button",{className:"bg-slate-800 text-white px-3 py-2 rounded mb-4",onClick:()=>{let e=i.episodes.findIndex(e=>"".concat(e.episode," ").concat(e.language)===u);if(e>0){let t=i.episodes[e-1];d("".concat(t.episode," ").concat(t.language))}},children:"Episode pr\xe9c\xe9dent"}),w&&(0,n.jsx)("button",{className:"bg-slate-800 text-white px-3 py-2 rounded mb-4",onClick:()=>{let e=i.episodes.findIndex(e=>"".concat(e.episode," ").concat(e.language)===u);if(e<i.episodes.length-1){let t=i.episodes[e+1];d("".concat(t.episode," ").concat(t.language))}},children:"Episode suivant"})]})]})]}):(0,n.jsx)("div",{className:"text-center text-gray-500",children:"Loading..."})}function o(){return(0,n.jsx)(a.Suspense,{fallback:(0,n.jsx)("div",{children:"Loading..."}),children:(0,n.jsx)(i,{})})}},1422:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});var n=r(7437),a=r(2265);function s(e){let{className:t="",quantity:r=30,staticity:s=50,ease:c=50}=e,l=(0,a.useRef)(null),i=(0,a.useRef)(null),o=(0,a.useRef)(null),u=(0,a.useRef)([]),d=function(){let[e,t]=(0,a.useState)({x:0,y:0});return(0,a.useEffect)(()=>{let e=e=>{t({x:e.clientX,y:e.clientY})};return window.addEventListener("mousemove",e),()=>{window.removeEventListener("mousemove",e)}},[]),e}(),h=(0,a.useRef)({x:0,y:0}),f=(0,a.useRef)({w:0,h:0}),x=window.devicePixelRatio;(0,a.useEffect)(()=>(l.current&&(o.current=l.current.getContext("2d")),p(),E(),window.addEventListener("resize",p),()=>{window.removeEventListener("resize",p)}),[]),(0,a.useEffect)(()=>{m()},[d.x,d.y]);let p=()=>{g(),j()},m=()=>{if(l.current){let e=l.current.getBoundingClientRect(),{w:t,h:r}=f.current,n=d.x-e.left-t/2,a=d.y-e.top-r/2;n<t/2&&n>-t/2&&a<r/2&&a>-r/2&&(h.current.x=n,h.current.y=a)}},g=()=>{i.current&&l.current&&o.current&&(u.current.length=0,f.current.w=i.current.offsetWidth,f.current.h=i.current.offsetHeight,l.current.width=f.current.w*x,l.current.height=f.current.h*x,l.current.style.width=f.current.w+"px",l.current.style.height=f.current.h+"px",o.current.scale(x,x))},w=()=>{let e=Math.floor(Math.random()*f.current.w);return{x:e,y:Math.floor(Math.random()*f.current.h),translateX:0,translateY:0,size:Math.floor(2*Math.random())+1,alpha:0,targetAlpha:parseFloat((.6*Math.random()+.1).toFixed(1)),dx:(Math.random()-.5)*.2,dy:(Math.random()-.5)*.2,magnetism:.1+4*Math.random()}},y=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(o.current){let{x:r,y:n,translateX:a,translateY:s,size:c,alpha:l}=e;o.current.translate(a,s),o.current.beginPath(),o.current.arc(r,n,c,0,2*Math.PI),o.current.fillStyle="rgba(72, 66, 245, ".concat(l,")"),o.current.fill(),o.current.setTransform(x,0,0,x,0,0),t||u.current.push(e)}},v=()=>{o.current&&o.current.clearRect(0,0,f.current.w,f.current.h)},j=()=>{v();for(let e=0;e<r;e++)y(w())},b=(e,t,r,n,a)=>{let s=(e-t)*(a-n)/(r-t)+n;return s>0?s:0},E=()=>{v(),u.current.forEach((e,t)=>{let r=parseFloat(b([e.x+e.translateX-e.size,f.current.w-e.x-e.translateX-e.size,e.y+e.translateY-e.size,f.current.h-e.y-e.translateY-e.size].reduce((e,t)=>Math.min(e,t)),0,20,0,1).toFixed(2));r>1?(e.alpha+=.02,e.alpha>e.targetAlpha&&(e.alpha=e.targetAlpha)):e.alpha=e.targetAlpha*r,e.x+=e.dx,e.y+=e.dy,e.translateX+=(h.current.x/(s/e.magnetism)-e.translateX)/c,e.translateY+=(h.current.y/(s/e.magnetism)-e.translateY)/c,e.x<-e.size||e.x>f.current.w+e.size||e.y<-e.size||e.y>f.current.h+e.size?(u.current.splice(t,1),y(w())):y({...e,x:e.x,y:e.y,translateX:e.translateX,translateY:e.translateY,alpha:e.alpha},!0)}),window.requestAnimationFrame(E)};return(0,n.jsx)("div",{className:t,ref:i,"aria-hidden":"true",children:(0,n.jsx)("canvas",{ref:l})})}},6463:function(e,t,r){"use strict";var n=r(1169);r.o(n,"useRouter")&&r.d(t,{useRouter:function(){return n.useRouter}}),r.o(n,"useSearchParams")&&r.d(t,{useSearchParams:function(){return n.useSearchParams}})}},function(e){e.O(0,[138,971,23,744],function(){return e(e.s=6276)}),_N_E=e.O()}]);